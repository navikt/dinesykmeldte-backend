name: Deploy app to dev and prod
on:
  push:
    branches:
      - main
    paths:
      - 'dinesykmeldte-backend/**'
      - '.github/workflows/deploy-app.yml'
      - 'build.gradle.kts'

jobs:
  jar-app:
    uses: navikt/teamsykmelding-github-actions-workflows/.github/workflows/jar-app.yaml@main
    secrets: inherit
    with:
      app: dinesykmeldte-backend
      dockerfile_path: Dockerfile
      docker_context: .
      subprojects: false
      naiserator_dev: naiserator-dev.yaml
      naiserator_prod: naiserator-prod.yaml